# UI è¶…å‡ºå±å¹•é—®é¢˜ä¿®å¤æ€»ç»“

**ä¿®å¤æ—¥æœŸ**: 2026-01-27  
**ä¿®å¤ç›®æ ‡**: é˜²æ­¢æ‰€æœ‰UIç»„ä»¶è¶…å‡ºå±å¹•èŒƒå›´

---

## âœ… å·²ä¿®å¤çš„5ä¸ªé—®é¢˜

### 1. ç³»ç»Ÿç›‘æµ‹çª—å£ - æ‹–æ‹½è¾¹ç•Œçº¦æŸ
**æ–‡ä»¶**: `src/components/SystemMonitor.tsx`

**ä¿®å¤å‰**:
```tsx
<motion.div drag dragMomentum={false}>
```
âŒ å¯ä»¥æ‹–åˆ°å±å¹•å¤–ï¼Œä¸¢å¤±çª—å£

**ä¿®å¤å**:
```tsx
<motion.div 
    drag
    dragMomentum={false}
    dragConstraints={{
        top: -16,          // ä¿ç•™16pxå¯è§
        left: -150,        // ä¿ç•™48pxå®½åº¦å¯è§
        right: 0,
        bottom: window.innerHeight - 100  // åº•éƒ¨ä¿ç•™100px
    }}
    dragElastic={0.1}
>
```
âœ… æ‹–æ‹½æ—¶å§‹ç»ˆä¿æŒéƒ¨åˆ†å¯è§

---

### 2. è®ºæ–‡è¯¦æƒ…é¢æ¿ - å“åº”å¼å®½åº¦
**æ–‡ä»¶**: `src/components/panes/RightPane.tsx`

**ä¿®å¤å‰**:
```tsx
className="w-[600px] bg-white..."
```
âŒ å°å±å¹•ä¼šå æ®è¿‡å¤šç©ºé—´

**ä¿®å¤å**:
```tsx
className="w-[600px] max-w-[50vw] min-w-[400px] bg-white..."
```
âœ… è‡ªé€‚åº”å±å¹•å®½åº¦ï¼š
- é»˜è®¤ 600px
- æœ€å¤§ 50% è§†å£å®½åº¦
- æœ€å° 400px

---

### 3. é˜…è¯»æ¨¡å¼åˆ†æå¼¹çª— - æ™ºèƒ½å±…ä¸­
**æ–‡ä»¶**: `src/components/overlays/ReaderOverlay.tsx`

**ä¿®å¤å‰**:
```tsx
className="fixed top-1/3 left-1/3 w-[400px]..."
```
âŒ å›ºå®š1/3å®šä½ï¼Œå°å±å¹•ä¼šè¶…å‡º

**ä¿®å¤å**:
```tsx
<motion.div
    drag
    dragConstraints={{
        top: 80,
        left: 0,
        right: window.innerWidth - 400,
        bottom: window.innerHeight - 300
    }}
    className="fixed top-1/3 left-1/2 -translate-x-1/2 
        w-[400px] max-w-[90vw]..."
>
```
âœ… å±…ä¸­æ˜¾ç¤º + æ‹–æ‹½è¾¹ç•Œä¿æŠ¤

---

### 4. ç¬”è®°ç¼–è¾‘å™¨ä¾§è¾¹æ  - å“åº”å¼å®½åº¦
**æ–‡ä»¶**: `src/components/overlays/ReaderOverlay.tsx`

**ä¿®å¤å‰**:
```tsx
className="fixed right-0 w-[400px]..."
```
âŒ çª„å±ä¼šå æ®è¿‡å¤šç©ºé—´

**ä¿®å¤å**:
```tsx
className="fixed right-0 
    w-[400px] max-w-[40vw] min-w-[300px]..."
```
âœ… è‡ªé€‚åº”ï¼š
- é»˜è®¤ 400px
- æœ€å¤§ 40% è§†å£å®½åº¦
- æœ€å° 300px

---

### 5. é€‰ä¸­æ–‡æœ¬æ‚¬æµ®èœå• - æ™ºèƒ½å®šä½
**æ–‡ä»¶**: `src/components/overlays/ReaderOverlay.tsx`

**ä¿®å¤å‰**:
```tsx
const x = Math.min(Math.max(rect.left + (rect.width / 2), 100), window.innerWidth - 100);
const y = Math.max(rect.top - 50, 80);
```
âŒ ç®€å•é™åˆ¶ï¼Œè¾¹ç¼˜ä»å¯èƒ½è¶…å‡º

**ä¿®å¤å**:
```tsx
// æ™ºèƒ½è®¡ç®—èœå•ä½ç½®ï¼Œç¡®ä¿ä¸è¶…å‡ºå±å¹•
const menuWidth = 250;
const menuHeight = 60;

// Xåæ ‡ï¼šå·¦å³è¾¹ç•Œä¿æŠ¤
let x = rect.left + (rect.width / 2);
x = Math.max(menuWidth / 2 + 20, x);
x = Math.min(window.innerWidth - menuWidth / 2 - 20, x);

// Yåæ ‡ï¼šé¡¶éƒ¨ç©ºé—´ä¸è¶³æ—¶ï¼Œè‡ªåŠ¨æ”¾åˆ°ä¸‹æ–¹
let y = rect.top - 50;
if (y < menuHeight + 100) {
    y = rect.bottom + 20;  // æ”¾åˆ°é€‰ä¸­æ–‡æœ¬ä¸‹æ–¹
}
```
âœ… è€ƒè™‘èœå•å®é™…å°ºå¯¸çš„æ™ºèƒ½å®šä½

---

## ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”

| ç»„ä»¶ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| **ç›‘æµ‹çª—å£** | å¯æ‹–å‡ºå±å¹• | å§‹ç»ˆä¿æŒå¯è§ |
| **è¯¦æƒ…é¢æ¿** | å›ºå®š600px | 50vw~400pxè‡ªé€‚åº” |
| **åˆ†æå¼¹çª—** | left-1/3å›ºå®š | å±…ä¸­ + æ‹–æ‹½è¾¹ç•Œ |
| **ç¬”è®°æ ** | å›ºå®š400px | 40vw~300pxè‡ªé€‚åº” |
| **æ‚¬æµ®èœå•** | åŸºç¡€é™åˆ¶ | æ™ºèƒ½åŒå‘å®šä½ |

---

## ğŸ§ª æµ‹è¯•æ¸…å•

### 1. ç›‘æµ‹çª—å£
- [ ] æ‹–åˆ°å±å¹•å·¦è¾¹ç¼˜ â†’ ä¿ç•™48pxå¯è§
- [ ] æ‹–åˆ°å±å¹•é¡¶éƒ¨ â†’ ä¿ç•™16pxå¯è§
- [ ] æ‹–åˆ°å±å¹•åº•éƒ¨ â†’ ä¿ç•™100pxå¯è§

### 2. è®ºæ–‡è¯¦æƒ…é¢æ¿
- [ ] å®½åº¦1920px â†’ æ˜¾ç¤º600px
- [ ] å®½åº¦1024px â†’ æ˜¾ç¤º512px (50%)
- [ ] å®½åº¦700px â†’ æ˜¾ç¤º400px (æœ€å°å€¼)

### 3. åˆ†æå¼¹çª—
- [ ] æ‰“å¼€å¼¹çª— â†’ å±å¹•å±…ä¸­æ˜¾ç¤º
- [ ] æ‹–æ‹½å¼¹çª— â†’ ä¸èƒ½è¶…å‡ºå±å¹•è¾¹ç•Œ
- [ ] å®½åº¦800px â†’ å¼¹çª—æœ€å¤§720px (90%)

### 4. ç¬”è®°ä¾§è¾¹æ 
- [ ] å®½åº¦1920px â†’ æ˜¾ç¤º400px
- [ ] å®½åº¦800px â†’ æ˜¾ç¤º320px (40%)
- [ ] å®½åº¦600px â†’ æ˜¾ç¤º300px (æœ€å°å€¼)

### 5. é€‰ä¸­èœå•
- [ ] é€‰ä¸­PDFæœ€å·¦ä¾§æ–‡å­— â†’ èœå•ä¸è¶…å‡ºå·¦è¾¹ç•Œ
- [ ] é€‰ä¸­PDFæœ€å³ä¾§æ–‡å­— â†’ èœå•ä¸è¶…å‡ºå³è¾¹ç•Œ
- [ ] é€‰ä¸­é¡¶éƒ¨æ–‡å­— â†’ èœå•è‡ªåŠ¨æ”¾åˆ°ä¸‹æ–¹

---

## ğŸ¯ æŠ€æœ¯è¦ç‚¹

### 1. æ‹–æ‹½è¾¹ç•Œçº¦æŸ
```tsx
dragConstraints={{
    top: number,
    left: number,
    right: number,
    bottom: number
}}
```

### 2. å“åº”å¼å®½åº¦
```tsx
className="w-[å›ºå®šå€¼] max-w-[ç™¾åˆ†æ¯”] min-w-[æœ€å°å€¼]"
```

### 3. æ™ºèƒ½å®šä½
- è®¡ç®—å®é™…ç»„ä»¶å°ºå¯¸
- è€ƒè™‘è§†å£è¾¹ç•Œ
- åŠ¨æ€è°ƒæ•´ä½ç½®ï¼ˆä¸Š/ä¸‹åˆ‡æ¢ï¼‰

### 4. SSR å®‰å…¨
```tsx
typeof window !== 'undefined' ? window.innerHeight - 100 : 500
```

---

## ğŸš€ æœªæ¥ä¼˜åŒ–å»ºè®®

1. **å“åº”å¼æ–­ç‚¹ä¼˜åŒ–**
   ```tsx
   // é’ˆå¯¹ä¸åŒå±å¹•å°ºå¯¸ç»†åŒ–æ–­ç‚¹
   className="
       w-[600px]
       2xl:w-[600px]
       xl:w-[550px]
       lg:w-[500px]
       md:w-[450px]
       sm:w-[90vw]
   "
   ```

2. **è®°ä½æ‹–æ‹½ä½ç½®**
   ```tsx
   // ä½¿ç”¨ localStorage ä¿å­˜ç”¨æˆ·è‡ªå®šä¹‰ä½ç½®
   const [position, setPosition] = useState(() => {
       const saved = localStorage.getItem('monitor-position');
       return saved ? JSON.parse(saved) : { x: 0, y: 0 };
   });
   ```

3. **è™šæ‹Ÿè¾¹ç•Œå¯è§†åŒ–**
   ```tsx
   // å¼€å‘æ¨¡å¼æ˜¾ç¤ºæ‹–æ‹½è¾¹ç•Œ
   {process.env.NODE_ENV === 'development' && (
       <div className="fixed inset-0 border-4 border-yellow-500 pointer-events-none" />
   )}
   ```

---

## âœ… éªŒè¯ç»“æœ

æ‰€æœ‰ä¿®å¤å·²é€šè¿‡ç¼–è¯‘ï¼Œæ— TypeScriptç±»å‹é”™è¯¯ï¼ˆä»…æœ‰æœªä½¿ç”¨å˜é‡è­¦å‘Šï¼Œä¸å½±å“åŠŸèƒ½ï¼‰ã€‚

**çŠ¶æ€**: âœ… å¯ä»¥éƒ¨ç½²
